<!DOCTYPE html>
{% load static %}
{% load widget_tweaks %}
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Sign Up - WorksTeamWear</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style media="screen">
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
 
      body {
        font-family: 'Inter', sans-serif;
        background: linear-gradient(135deg, #fff7ed 0%, #ffedd5 50%, #fed7aa 100%);
        min-height: 100vh;
        position: relative;
        overflow-x: hidden;
      }
 
      /* Added animated background gradients for athletic aesthetic */
      body::before {
        content: '';
        position: absolute;
        top: -50%;
        right: -50%;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle, rgba(234, 88, 12, 0.1) 0%, transparent 70%);
        animation: float 20s ease-in-out infinite;
        z-index: 0;
      }
 
      body::after {
        content: '';
        position: absolute;
        bottom: -50%;
        left: -50%;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle, rgba(249, 115, 22, 0.1) 0%, transparent 70%);
        animation: float 25s ease-in-out infinite reverse;
        z-index: 0;
      }
 
      @keyframes float {
        0%, 100% { transform: translate(0, 0) rotate(0deg); }
        33% { transform: translate(30px, -30px) rotate(120deg); }
        66% { transform: translate(-20px, 20px) rotate(240deg); }
      }
 
      .container {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        padding: 20px;
        position: relative;
        z-index: 1;
      }
 
      .row {
        width: 100%;
        display: flex;
        justify-content: center;
      }
 
      /* Updated card styling with orange theme and modern glassmorphism */
      .signup-card {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border: 1px solid rgba(234, 88, 12, 0.1);
        border-radius: 16px;
        padding: 28px;
        width: 100%;
        max-width: 600px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(234, 88, 12, 0.1);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        animation: fadeInUp 0.6s ease-out;
      }
 
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
 
      .signup-card:hover {
        box-shadow: 0 25px 70px rgba(234, 88, 12, 0.15);
        transform: translateY(-5px);
      }
 
      /* Updated header with Playfair Display and orange accents */
      .header {
        text-align: center;
        margin-bottom: 30px;
      }
 
      .header h1 {
        color: #1f2937;
        font-family: 'Playfair Display', serif;
        font-size: 28px;
        font-weight: 900;
        margin-bottom: 8px;
        animation: fadeInDown 0.5s ease-out;
        line-height: 1.2;
      }
 
      .header p {
        color: #6b7280;
        font-size: 14px;
        font-weight: 400;
        animation: fadeInDown 0.6s ease-out;
      }
 
      @keyframes fadeInDown {
        from {
          opacity: 0;
          transform: translateY(-20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
 
      /* Added section titles for better organization */
      .section-title {
        font-size: 18px;
        font-weight: 700;
        color: #374151;
        margin: 24px 0 16px;
        padding-bottom: 8px;
        border-bottom: 2px solid #ea580c;
      }
 
      .form-group {
        margin-bottom: 20px;
      }
 
      .form-row {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
      }
 
      .form-row .form-group {
        flex: 1;
        margin-bottom: 0;
      }
 
      .form-group label {
        display: block;
        color: #374151;
        font-size: 14px;
        font-weight: 600;
        margin-bottom: 8px;
      }
 
      /* Updated form controls with orange focus states */
      .form-control {
        width: 100%;
        padding: 12px 16px;
        background: #f9fafb;
        border: 2px solid #d1d5db;
        border-radius: 8px;
        color: #1f2937;
        font-size: 14px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        outline: none;
        font-family: 'Inter', sans-serif;
        animation: fadeIn 0.5s ease-out;
      }
 
      @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }
 
      .form-control::placeholder {
        color: #9ca3af;
      }
 
      .form-control:focus {
        border-color: #ea580c;
        background: white;
        box-shadow: 0 0 0 3px rgba(234, 88, 12, 0.1);
        transform: translateY(-1px);
      }
 
      select.form-control {
        cursor: pointer;
      }
 
      select.form-control option {
        background: white;
        color: #1f2937;
      }
 
      /* Updated terms container with orange theme */
      .terms-container {
        display: flex;
        align-items: flex-start;
        gap: 12px;
        margin: 25px 0;
        padding: 15px;
        background: rgba(234, 88, 12, 0.05);
        border-radius: 12px;
        border: 1px solid rgba(234, 88, 12, 0.2);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        animation: fadeIn 0.8s ease-out;
      }
 
      .terms-container input[type="checkbox"] {
        margin-top: 2px;
        width: 18px;
        height: 18px;
        accent-color: #ea580c;
        cursor: pointer;
      }
 
      .terms-text {
        color: #374151;
        font-size: 13px;
        line-height: 1.5;
      }
 
      .terms-text a {
        color: #ea580c;
        text-decoration: underline;
        cursor: pointer;
        transition: color 0.3s;
        font-weight: 600;
      }
 
      .terms-text a:hover {
        color: #c2410c;
      }
 
      /* Updated submit button with orange gradient */
      .submit-btn {
        width: 100%;
        padding: 14px;
        background: linear-gradient(135deg, #ea580c 0%, #f97316 100%);
        border: none;
        border-radius: 8px;
        color: white;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        margin-bottom: 20px;
        animation: fadeInUp 0.7s ease-out;
        box-shadow: 0 4px 12px rgba(234, 88, 12, 0.3);
      }
 
      .submit-btn:hover:not(:disabled) {
        transform: translateY(-2px) scale(1.02);
        box-shadow: 0 6px 20px rgba(234, 88, 12, 0.4);
      }
 
      .submit-btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
      }
 
      .login-link {
        text-align: center;
      }
 
      .login-link a {
        color: #ea580c;
        text-decoration: none;
        font-size: 14px;
        font-weight: 600;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        animation: fadeIn 0.9s ease-out;
      }
 
      .login-link a:hover {
        color: #c2410c;
        text-decoration: underline;
      }
 
      /* Added error and success message styling */
      .error-messages {
        background: #fee2e2;
        border: 1px solid #fecaca;
        color: #991b1b;
        padding: 12px 16px;
        border-radius: 8px;
        margin-bottom: 20px;
        font-size: 14px;
      }
 
      .error-messages ul {
        list-style: none;
        margin: 0;
        padding: 0;
      }
 
      .error-messages li {
        margin-bottom: 4px;
      }
 
      .success-message {
        background: #d1fae5;
        border: 1px solid #a7f3d0;
        color: #065f46;
        padding: 12px 16px;
        border-radius: 8px;
        margin-bottom: 20px;
        font-size: 14px;
      }
 
      /* Added mobile number input styling */
      .mobile-input-wrapper {
        display: flex;
        align-items: center;
      }
 
      .mobile-prefix {
        padding: 12px 16px;
        background: #f3f4f6;
        border: 2px solid #d1d5db;
        border-right: 0;
        border-radius: 8px 0 0 8px;
        color: #374151;
        font-weight: 600;
        font-size: 14px;
      }
 
      .mobile-input-wrapper .form-control {
        border-radius: 0 8px 8px 0;
      }
 
      .mobile-help {
        color: #dc2626;
        font-size: 12px;
        margin-top: 4px;
        display: none;
      }
 
      /* Added modal styling for terms and conditions */
      .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(4px);
      }
 
      .modal-content {
        background-color: white;
        margin: 5% auto;
        padding: 28px;
        border-radius: 16px;
        width: 90%;
        max-width: 700px;
        max-height: 80vh;
        overflow-y: auto;
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
        animation: modalSlideIn 0.3s ease-out;
      }
 
      @keyframes modalSlideIn {
        from {
          opacity: 0;
          transform: translateY(-50px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
 
      .modal-content h2 {
        font-family: 'Playfair Display', serif;
        color: #ea580c;
        font-size: 28px;
        margin-bottom: 20px;
      }
 
      .modal-content h3 {
        color: #374151;
        font-size: 18px;
        margin-top: 24px;
        margin-bottom: 12px;
      }
 
      .modal-content p {
        color: #6b7280;
        line-height: 1.6;
        margin-bottom: 12px;
      }
 
      .close {
        color: #9ca3af;
        float: right;
        font-size: 32px;
        font-weight: bold;
        line-height: 1;
        cursor: pointer;
        transition: color 0.2s;
      }
 
      .close:hover {
        color: #ea580c;
      }
 
      @media (max-width: 768px) {
        .signup-card {
          padding: 24px 16px;
        }
 
        .header h1 {
          font-size: 28px;
        }
 
        .form-row {
          flex-direction: column;
          gap: 0;
        }
 
        .form-row .form-group {
          margin-bottom: 20px;
        }
 
        .modal-content {
          padding: 30px 20px;
          margin: 10% auto;
        }
      }
    </style>
    <script src="{% static 'js/ph-address-cascade-api.js' %}"></script>
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col-md-6">
          <div class="card">
            <div class="signup-card">
              <div class="header">
                <h1>Join WorksTeamWear</h1>
                <p>Create your account and start shopping premium jerseys</p>
              </div>
 
              <!-- Display form errors -->
              {% if form.errors or userForm.errors or customerForm.errors %}
                <div class="error-messages">
                  <ul>
                    {% for field, errors in userForm.errors.items %}
                      {% for error in errors %}
                        <li>{{ field|title }}: {{ error }}</li>
                      {% endfor %}
                    {% endfor %}
                    {% for field, errors in customerForm.errors.items %}
                      {% for error in errors %}
                        <li>{{ field|title }}: {{ error }}</li>
                      {% endfor %}
                    {% endfor %}
                  </ul>
                </div>
              {% endif %}
 
              <!-- Success message -->
              {% if messages %}
                {% for message in messages %}
                  <div class="success-message">
                    {{ message }}
                  </div>
                {% endfor %}
              {% endif %}
 
              <form method="post" enctype="multipart/form-data">
                {% csrf_token %}
 
                <!-- Personal Information -->
                <h3 class="section-title">Personal Information</h3>
 
                <!-- Name fields -->
                <div class="form-row">
                  <div class="form-group">
                    <label for="{{ userForm.first_name.id_for_label }}">First Name</label>
                    {% render_field userForm.first_name class="form-control" placeholder="First Name" %}
                  </div>
                  <div class="form-group">
                    <label for="{{ userForm.last_name.id_for_label }}">Last Name</label>
                    {% render_field userForm.last_name class="form-control" placeholder="Last Name" %}
                  </div>
                </div>
 
                <!-- Username -->
                <div class="form-group">
                  <label for="{{ userForm.username.id_for_label }}">Username</label>
                  {% render_field userForm.username class="form-control" placeholder="Username" %}
                </div>
 
                <!-- Account Security -->
                <h3 class="section-title">Account Security</h3>
 
                <!-- Password -->
                <div class="form-group">
                  <label for="{{ userForm.password.id_for_label }}">Password</label>
                  {% render_field userForm.password class="form-control" placeholder="Password" %}
                </div>
                <!-- Confirm Password -->
                <div class="form-group">
                  <label for="{{ userForm.confirm_password.id_for_label }}">Confirm Password</label>
                  {% render_field userForm.confirm_password class="form-control" placeholder="Confirm Password" %}
                </div>
 
                <!-- Shipping Address -->
                <h3 class="section-title">Shipping Address</h3>
 
                <!-- Address Section: Region, Province, City/Municipality, Barangay -->
                <div class="form-row">
                  <div class="form-group">
                    <label for="region">Region</label>
                    <select name="region" id="region" class="form-control" required>
                      <option value="" disabled selected>Select Region</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label for="province">Province</label>
                    <select name="province" id="province" class="form-control" required>
                      <option value="" disabled selected>Select Province</option>
                    </select>
                  </div>
                </div>
 
                <div class="form-row">
                  <div class="form-group">
                    <label for="citymun">City/Municipality</label>
                    <select name="citymun" id="citymun" class="form-control" required>
                      <option value="" disabled selected>Select City/Municipality</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label for="barangay">Barangay</label>
                    <select name="barangay" id="barangay" class="form-control" required>
                      <option value="" disabled selected>Select Barangay</option>
                    </select>
                  </div>
                </div>
 
                <!-- Street Address -->
                <div class="form-group">
                  <label for="{{ customerForm.street_address.id_for_label }}">Street Address</label>
                  {% render_field customerForm.street_address class="form-control" placeholder="Street Address" %}
                </div>
 
                <script>
                  document.addEventListener('DOMContentLoaded', function() {
                    window.initPHAddressCascadeAPI({
                      region: 'region',
                      province: 'province',
                      citymun: 'citymun',
                      barangay: 'barangay'
                    });
                  });
                </script>
 
                <!-- Postal Code and Contact -->
                <div class="form-row">
                  <div class="form-group">
                    <label for="{{ customerForm.postal_code.id_for_label }}">Postal Code</label>
                    {% render_field customerForm.postal_code class="form-control" placeholder="Postal Code" %}
                  </div>
                  <div class="form-group">
                    <label for="{{ customerForm.mobile.id_for_label }}">Contact Number</label>
                    <div class="mobile-input-wrapper">
                      <span class="mobile-prefix">+63</span>
                      {% render_field customerForm.mobile class="form-control" id="mobile_number" placeholder="956 837 0169" maxlength="13" minlength="13" pattern="^\d{3} \d{3} \d{4}$" oninput="autoFormatPHMobile(this)" %}
                    </div>
                    <small id="mobileHelp" class="mobile-help">Invalid or disallowed number.</small>
                    <script>
                    function autoFormatPHMobile(input) {
                        let digits = input.value.replace(/\D/g, '');
                        if (digits.length > 3 && digits.length <= 6)
                            input.value = digits.slice(0,3) + ' ' + digits.slice(3);
                        else if (digits.length > 6)
                            input.value = digits.slice(0,3) + ' ' + digits.slice(3,6) + ' ' + digits.slice(6,10);
                        else
                            input.value = digits;
                    }
                    </script>
                  </div>
                </div>
 
                <!-- Terms and Conditions -->
                <div class="terms-container">
                  {% render_field customerForm.privacy_policy class="form-check-input" id="terms" %}
                  <label for="terms" class="terms-text">
                    I agree to the
                    <a href="#" id="termsLink">Terms and Conditions</a>
                    and
                    <a href="#" id="privacyLink">Privacy Policy</a>
                  </label>
                </div>
 
                <button type="submit" class="submit-btn" id="createAccountBtn" disabled>Create Account</button>
               
                <div class="login-link">
                  <a href="/customerlogin">Already have an account? Login Here!</a>
                </div>
              </form>
              <script>
                // Enable the Create Account button only if terms are checked AND all address fields are selected
                document.addEventListener('DOMContentLoaded', function() {
                  var termsCheckbox = document.getElementById('terms');
                  var submitBtn = document.getElementById('createAccountBtn');
                  var region = document.getElementById('region');
                  var province = document.getElementById('province');
                  var citymun = document.getElementById('citymun');
                  var barangay = document.getElementById('barangay');
 
                  function checkEnable() {
                    var allSelected = region.value && province.value && citymun.value && barangay.value;
                    submitBtn.disabled = !(termsCheckbox.checked && allSelected);
                  }
 
                  if (termsCheckbox && submitBtn) {
                    termsCheckbox.addEventListener('change', checkEnable);
                  }
                  [region, province, citymun, barangay].forEach(function(sel) {
                    if (sel) sel.addEventListener('change', checkEnable);
                  });
                  checkEnable(); // Initial check
                });
              </script>
            </div>
          </div>
        </div>
      </div>
    </div>
 
    <!-- Terms and Conditions Modal -->
    <div id="termsModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Terms and Conditions & Privacy Policy</h2>
        <p><strong>Last updated:</strong> December 2024</p>
       
        <h3>1. Acceptance of Terms</h3>
        <p>By creating an account with WorksTeamWear, you agree to be bound by these Terms and Conditions. If you do not agree to these terms, please do not use our service.</p>
       
        <h3>2. Account Registration</h3>
        <p>You must provide accurate, current, and complete information during the registration process. You are responsible for maintaining the confidentiality of your account credentials and for all activities that occur under your account.</p>
       
        <h3>3. Use of Service</h3>
        <p>You agree to use our service only for lawful purposes and in accordance with these terms. You may not:</p>
        <p>• Use the service for any illegal or unauthorized purpose<br>
        • Violate any laws in your jurisdiction<br>
        • Transmit any harmful or malicious code<br>
        • Interfere with or disrupt the service</p>
       
        <h3>4. Privacy Policy</h3>
        <p><strong>Information We Collect:</strong></p>
        <p>• Personal information (name, email, address, phone number)<br>
        • Account credentials<br>
        • Usage data and preferences</p>
       
        <p><strong>How We Use Your Information:</strong></p>
        <p>• To provide and maintain our service<br>
        • To process your orders and transactions<br>
        • To communicate with you about your account<br>
        • To improve our service and user experience</p>
       
        <p><strong>Information Sharing:</strong></p>
        <p>We do not sell, trade, or rent your personal information to third parties. We may share your information only in the following circumstances:</p>
        <p>• With your explicit consent<br>
        • To comply with legal obligations<br>
        • To protect our rights and safety</p>
       
        <h3>5. Data Security</h3>
        <p>We implement appropriate security measures to protect your personal information against unauthorized access, alteration, disclosure, or destruction. However, no method of transmission over the internet is 100% secure.</p>
       
        <h3>6. Order Processing</h3>
        <p>All orders are subject to acceptance and availability. We reserve the right to refuse or cancel any order for any reason. Prices and availability are subject to change without notice.</p>
       
        <h3>7. Limitation of Liability</h3>
        <p>WorksTeamWear shall not be liable for any indirect, incidental, special, consequential, or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses.</p>
       
        <h3>8. Changes to Terms</h3>
        <p>We reserve the right to modify these terms at any time. Changes will be effective immediately upon posting on our website. Your continued use of the service constitutes acceptance of the modified terms.</p>
       
        <h3>9. Termination</h3>
        <p>We may terminate or suspend your account immediately, without prior notice, for conduct that we believe violates these terms or is harmful to other users, us, or third parties.</p>
       
        <h3>10. Contact Information</h3>
        <p>If you have any questions about these Terms and Conditions or our Privacy Policy, please contact us at:</p>
        <p><strong>Email:</strong> support@worksteamwear.com<br>
        <strong>Phone:</strong> +63 (555) 123-4567<br>
        <strong>Address:</strong> Manila, Philippines</p>
       
        <p style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #ddd; font-size: 12px; color: #888;">
          By clicking "I agree" and creating an account, you acknowledge that you have read, understood, and agree to be bound by these Terms and Conditions and Privacy Policy.
        </p>
      </div>
    </div>
 
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Map PSGC region codes to Django internal region codes
        const regionCodeMap = {
          '010000000': 'R1',   // Ilocos Region
          '020000000': 'R2',   // Cagayan Valley
          '030000000': 'R3',   // Central Luzon
          '040000000': 'R4A',  // CALABARZON
          '170000000': 'R4B',  // MIMAROPA
          '050000000': 'R5',   // Bicol Region
          '060000000': 'R6',   // Western Visayas
          '070000000': 'R7',   // Central Visayas
          '080000000': 'R8',   // Eastern Visayas
          '090000000': 'R9',   // Zamboanga Peninsula
          '100000000': 'R10',  // Northern Mindanao
          '110000000': 'R11',  // Davao Region
          '120000000': 'R12',  // SOCCSKSARGEN
          '130000000': 'NCR',  // National Capital Region
          '140000000': 'CAR',  // Cordillera Administrative Region
          '160000000': 'R13',  // Caraga
          '150000000': 'BARMM' // Bangsamoro Autonomous Region in Muslim Mindanao
        };
 
        const regionSelect = document.getElementById('region');
        const province = document.getElementById('province');
        const citymun = document.getElementById('citymun');
        const barangay = document.getElementById('barangay');
        const termsCheckbox = document.getElementById('terms');
        const submitBtn = document.getElementById('createAccountBtn');
 
        function getMappedRegionCode() {
          let psaCode = regionSelect.value;
          if (psaCode.length > 9) psaCode = psaCode.slice(0, 9);
          return regionCodeMap[psaCode] || '';
        }
 
        function checkEnable() {
          var allSelected = regionSelect.value && province.value && citymun.value && barangay.value;
          var mappedRegion = getMappedRegionCode();
          submitBtn.disabled = !(termsCheckbox.checked && allSelected && mappedRegion);
        }
 
        if (regionSelect) {
          regionSelect.addEventListener('change', function() {
            let mapped = getMappedRegionCode();
            this.setAttribute('data-django-code', mapped);
            checkEnable();
          });
        }
        [province, citymun, barangay, termsCheckbox].forEach(function(sel) {
          if (sel) sel.addEventListener('change', checkEnable);
        });
        checkEnable(); // Initial check
 
        // On form submit, set region value to Django code using a hidden input
        const form = document.querySelector('form');
        let hiddenRegionInput = document.getElementById('region_django_code');
        if (!hiddenRegionInput) {
          hiddenRegionInput = document.createElement('input');
          hiddenRegionInput.type = 'hidden';
          hiddenRegionInput.name = 'region';
          hiddenRegionInput.id = 'region_django_code';
          form.appendChild(hiddenRegionInput);
        }
        if (form && regionSelect) {
          form.addEventListener('submit', function(e) {
            let mapped = getMappedRegionCode();
            if (mapped) {
              hiddenRegionInput.value = mapped;
            } else {
              e.preventDefault();
              alert('Invalid region selected. Please select a valid region.');
            }
          });
        }
 
        // Modal functionality
        var modal = document.getElementById('termsModal');
        var termsLink = document.getElementById('termsLink');
        var privacyLink = document.getElementById('privacyLink');
        var closeBtn = document.getElementsByClassName('close')[0];
 
        termsLink.onclick = function(e) {
          e.preventDefault();
          modal.style.display = 'block';
        }
 
        privacyLink.onclick = function(e) {
          e.preventDefault();
          modal.style.display = 'block';
        }
 
        closeBtn.onclick = function() {
          modal.style.display = 'none';
        }
 
        window.onclick = function(event) {
          if (event.target == modal) {
            modal.style.display = 'none';
          }
        }
      });
    </script>
  </body>
</html>